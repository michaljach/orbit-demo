{"id":"db/ipfs.js","dependencies":[{"name":"/Users/michaljach/Sites/golf/package.json","includedInParent":true,"mtime":1612444349509},{"name":"ipfs","loc":{"line":1,"column":17},"parent":"/Users/michaljach/Sites/golf/src/db/ipfs.js","resolved":"/Users/michaljach/Sites/golf/node_modules/ipfs/src/index.js"},{"name":"orbit-db","loc":{"line":2,"column":20},"parent":"/Users/michaljach/Sites/golf/src/db/ipfs.js","resolved":"/Users/michaljach/Sites/golf/node_modules/orbit-db/src/OrbitDB.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.connect = void 0;\n\nvar _ipfs = _interopRequireDefault(require(\"ipfs\"));\n\nvar _orbitDb = _interopRequireDefault(require(\"orbit-db\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nlet ipfs, db;\n\nconst connect = async () => {\n  try {\n    ipfs = await _ipfs.default.create({\n      repo: \"/orbitdb/examples/browser/new/ipfs/0.33.1\",\n      start: true,\n      preload: {\n        enabled: false\n      },\n      EXPERIMENTAL: {\n        pubsub: true\n      },\n      config: {\n        Addresses: {\n          Swarm: [// Use IPFS dev signal server\n          // '/dns4/star-signal.cloud.ipfs.team/wss/p2p-webrtc-star',\n          // '/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star',\n          // Use IPFS dev webrtc signal server\n          \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\", \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\", \"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\" // Use local signal server\n          // '/ip4/0.0.0.0/tcp/9090/wss/p2p-webrtc-star',\n          ]\n        }\n      }\n    });\n    const orbitdb = await _orbitDb.default.createInstance(ipfs);\n    const db = await orbitdb.log(\"zdpuAnq4qr9a3FNH2SLsfuD7n2Ej8Xkhze5Xq8iqwuAWz1yuo/golf-dev\");\n    await db.load(); // console.log(db.address);\n    // // const hash = await db.add(\"world\");\n    // const networkPeers = await ipfs.swarm.peers();\n    // const databasePeers = await ipfs.pubsub.peers(db.address.toString());\n    // const elem = document.getElementById(\"peers\");\n    // elem.innerHTML = `${networkPeers.length} / ${databasePeers.length}`;\n    // db.events.on(\"replicated\", (address) => {\n    //   console.log(db.iterator({ limit: -1 }).collect());\n    // });\n    // db.events.on(\"write\", () => console.log(\"update\"));\n    // db.events.on(\"peer\", () => {\n    //   elem.innerHTML = `${networkPeers.length} / ${databasePeers.length}`;\n    // });\n    // Query\n\n    return {\n      db,\n      ipfs\n    }; // return db.iterator({ limit: -1 }).collect();\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexports.connect = connect;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"db/ipfs.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"db/ipfs.js","original":{"line":2,"column":0}},{"generated":{"line":14,"column":0},"source":"db/ipfs.js","original":{"line":4,"column":0}},{"name":"ipfs","generated":{"line":14,"column":4},"source":"db/ipfs.js","original":{"line":4,"column":4}},{"generated":{"line":14,"column":8},"source":"db/ipfs.js","original":{"line":4,"column":0}},{"name":"db","generated":{"line":14,"column":10},"source":"db/ipfs.js","original":{"line":4,"column":10}},{"generated":{"line":14,"column":12},"source":"db/ipfs.js","original":{"line":4,"column":0}},{"generated":{"line":16,"column":0},"source":"db/ipfs.js","original":{"line":6,"column":7}},{"name":"connect","generated":{"line":16,"column":6},"source":"db/ipfs.js","original":{"line":6,"column":13}},{"generated":{"line":16,"column":13},"source":"db/ipfs.js","original":{"line":6,"column":20}},{"generated":{"line":16,"column":16},"source":"db/ipfs.js","original":{"line":6,"column":23}},{"generated":{"line":16,"column":28},"source":"db/ipfs.js","original":{"line":6,"column":35}},{"generated":{"line":17,"column":0},"source":"db/ipfs.js","original":{"line":7,"column":2}},{"generated":{"line":17,"column":6},"source":"db/ipfs.js","original":{"line":7,"column":6}},{"name":"ipfs","generated":{"line":18,"column":0},"source":"db/ipfs.js","original":{"line":8,"column":4}},{"name":"ipfs","generated":{"line":18,"column":4},"source":"db/ipfs.js","original":{"line":8,"column":4}},{"generated":{"line":18,"column":8},"source":"db/ipfs.js","original":{"line":8,"column":8}},{"generated":{"line":18,"column":11},"source":"db/ipfs.js","original":{"line":8,"column":11}},{"name":"Ipfs","generated":{"line":18,"column":17},"source":"db/ipfs.js","original":{"line":8,"column":17}},{"name":"create","generated":{"line":18,"column":31},"source":"db/ipfs.js","original":{"line":8,"column":22}},{"generated":{"line":18,"column":37},"source":"db/ipfs.js","original":{"line":8,"column":17}},{"generated":{"line":18,"column":38},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"name":"repo","generated":{"line":19,"column":0},"source":"db/ipfs.js","original":{"line":9,"column":6}},{"name":"repo","generated":{"line":19,"column":6},"source":"db/ipfs.js","original":{"line":9,"column":6}},{"generated":{"line":19,"column":10},"source":"db/ipfs.js","original":{"line":9,"column":10}},{"generated":{"line":19,"column":12},"source":"db/ipfs.js","original":{"line":9,"column":12}},{"generated":{"line":19,"column":55},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"name":"start","generated":{"line":20,"column":0},"source":"db/ipfs.js","original":{"line":10,"column":6}},{"name":"start","generated":{"line":20,"column":6},"source":"db/ipfs.js","original":{"line":10,"column":6}},{"generated":{"line":20,"column":11},"source":"db/ipfs.js","original":{"line":10,"column":11}},{"generated":{"line":20,"column":13},"source":"db/ipfs.js","original":{"line":10,"column":13}},{"generated":{"line":20,"column":17},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"name":"preload","generated":{"line":21,"column":0},"source":"db/ipfs.js","original":{"line":11,"column":6}},{"name":"preload","generated":{"line":21,"column":6},"source":"db/ipfs.js","original":{"line":11,"column":6}},{"generated":{"line":21,"column":13},"source":"db/ipfs.js","original":{"line":11,"column":13}},{"generated":{"line":21,"column":15},"source":"db/ipfs.js","original":{"line":11,"column":15}},{"name":"enabled","generated":{"line":22,"column":0},"source":"db/ipfs.js","original":{"line":12,"column":8}},{"name":"enabled","generated":{"line":22,"column":8},"source":"db/ipfs.js","original":{"line":12,"column":8}},{"generated":{"line":22,"column":15},"source":"db/ipfs.js","original":{"line":12,"column":15}},{"generated":{"line":22,"column":17},"source":"db/ipfs.js","original":{"line":12,"column":17}},{"generated":{"line":23,"column":0},"source":"db/ipfs.js","original":{"line":11,"column":15}},{"generated":{"line":23,"column":7},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"name":"EXPERIMENTAL","generated":{"line":24,"column":0},"source":"db/ipfs.js","original":{"line":14,"column":6}},{"name":"EXPERIMENTAL","generated":{"line":24,"column":6},"source":"db/ipfs.js","original":{"line":14,"column":6}},{"generated":{"line":24,"column":18},"source":"db/ipfs.js","original":{"line":14,"column":18}},{"generated":{"line":24,"column":20},"source":"db/ipfs.js","original":{"line":14,"column":20}},{"name":"pubsub","generated":{"line":25,"column":0},"source":"db/ipfs.js","original":{"line":15,"column":8}},{"name":"pubsub","generated":{"line":25,"column":8},"source":"db/ipfs.js","original":{"line":15,"column":8}},{"generated":{"line":25,"column":14},"source":"db/ipfs.js","original":{"line":15,"column":14}},{"generated":{"line":25,"column":16},"source":"db/ipfs.js","original":{"line":15,"column":16}},{"generated":{"line":26,"column":0},"source":"db/ipfs.js","original":{"line":14,"column":20}},{"generated":{"line":26,"column":7},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"name":"config","generated":{"line":27,"column":0},"source":"db/ipfs.js","original":{"line":17,"column":6}},{"name":"config","generated":{"line":27,"column":6},"source":"db/ipfs.js","original":{"line":17,"column":6}},{"generated":{"line":27,"column":12},"source":"db/ipfs.js","original":{"line":17,"column":12}},{"generated":{"line":27,"column":14},"source":"db/ipfs.js","original":{"line":17,"column":14}},{"name":"Addresses","generated":{"line":28,"column":0},"source":"db/ipfs.js","original":{"line":18,"column":8}},{"name":"Addresses","generated":{"line":28,"column":8},"source":"db/ipfs.js","original":{"line":18,"column":8}},{"generated":{"line":28,"column":17},"source":"db/ipfs.js","original":{"line":18,"column":17}},{"generated":{"line":28,"column":19},"source":"db/ipfs.js","original":{"line":18,"column":19}},{"name":"Swarm","generated":{"line":29,"column":0},"source":"db/ipfs.js","original":{"line":19,"column":10}},{"name":"Swarm","generated":{"line":29,"column":10},"source":"db/ipfs.js","original":{"line":19,"column":10}},{"generated":{"line":29,"column":15},"source":"db/ipfs.js","original":{"line":19,"column":15}},{"generated":{"line":29,"column":17},"source":"db/ipfs.js","original":{"line":19,"column":17}},{"generated":{"line":29,"column":18},"source":"db/ipfs.js","original":{"line":20,"column":12}},{"generated":{"line":30,"column":0},"source":"db/ipfs.js","original":{"line":21,"column":12}},{"generated":{"line":31,"column":0},"source":"db/ipfs.js","original":{"line":22,"column":12}},{"generated":{"line":32,"column":0},"source":"db/ipfs.js","original":{"line":23,"column":12}},{"generated":{"line":33,"column":0},"source":"db/ipfs.js","original":{"line":24,"column":12}},{"generated":{"line":33,"column":73},"source":"db/ipfs.js","original":{"line":19,"column":17}},{"generated":{"line":33,"column":75},"source":"db/ipfs.js","original":{"line":25,"column":12}},{"generated":{"line":33,"column":138},"source":"db/ipfs.js","original":{"line":19,"column":17}},{"generated":{"line":33,"column":140},"source":"db/ipfs.js","original":{"line":26,"column":12}},{"generated":{"line":33,"column":208},"source":"db/ipfs.js","original":{"line":19,"column":17}},{"generated":{"line":33,"column":209},"source":"db/ipfs.js","original":{"line":27,"column":12}},{"generated":{"line":34,"column":0},"source":"db/ipfs.js","original":{"line":28,"column":12}},{"generated":{"line":35,"column":0},"source":"db/ipfs.js","original":{"line":19,"column":17}},{"generated":{"line":36,"column":0},"source":"db/ipfs.js","original":{"line":18,"column":19}},{"generated":{"line":37,"column":0},"source":"db/ipfs.js","original":{"line":17,"column":14}},{"generated":{"line":38,"column":0},"source":"db/ipfs.js","original":{"line":8,"column":29}},{"generated":{"line":38,"column":5},"source":"db/ipfs.js","original":{"line":8,"column":17}},{"generated":{"line":38,"column":6},"source":"db/ipfs.js","original":{"line":8,"column":4}},{"generated":{"line":39,"column":0},"source":"db/ipfs.js","original":{"line":34,"column":4}},{"name":"orbitdb","generated":{"line":39,"column":10},"source":"db/ipfs.js","original":{"line":34,"column":10}},{"generated":{"line":39,"column":17},"source":"db/ipfs.js","original":{"line":34,"column":17}},{"generated":{"line":39,"column":20},"source":"db/ipfs.js","original":{"line":34,"column":20}},{"name":"OrbitDB","generated":{"line":39,"column":26},"source":"db/ipfs.js","original":{"line":34,"column":26}},{"name":"createInstance","generated":{"line":39,"column":43},"source":"db/ipfs.js","original":{"line":34,"column":34}},{"generated":{"line":39,"column":57},"source":"db/ipfs.js","original":{"line":34,"column":26}},{"name":"ipfs","generated":{"line":39,"column":58},"source":"db/ipfs.js","original":{"line":34,"column":49}},{"generated":{"line":39,"column":62},"source":"db/ipfs.js","original":{"line":34,"column":26}},{"generated":{"line":39,"column":63},"source":"db/ipfs.js","original":{"line":34,"column":4}},{"generated":{"line":40,"column":0},"source":"db/ipfs.js","original":{"line":35,"column":4}},{"name":"db","generated":{"line":40,"column":10},"source":"db/ipfs.js","original":{"line":35,"column":10}},{"generated":{"line":40,"column":12},"source":"db/ipfs.js","original":{"line":35,"column":12}},{"generated":{"line":40,"column":15},"source":"db/ipfs.js","original":{"line":35,"column":15}},{"name":"orbitdb","generated":{"line":40,"column":21},"source":"db/ipfs.js","original":{"line":35,"column":21}},{"generated":{"line":40,"column":28},"source":"db/ipfs.js","original":{"line":35,"column":28}},{"name":"log","generated":{"line":40,"column":29},"source":"db/ipfs.js","original":{"line":35,"column":29}},{"generated":{"line":40,"column":32},"source":"db/ipfs.js","original":{"line":35,"column":21}},{"generated":{"line":40,"column":33},"source":"db/ipfs.js","original":{"line":36,"column":6}},{"generated":{"line":40,"column":93},"source":"db/ipfs.js","original":{"line":35,"column":21}},{"generated":{"line":40,"column":94},"source":"db/ipfs.js","original":{"line":35,"column":4}},{"generated":{"line":41,"column":0},"source":"db/ipfs.js","original":{"line":38,"column":4}},{"name":"db","generated":{"line":41,"column":10},"source":"db/ipfs.js","original":{"line":38,"column":10}},{"generated":{"line":41,"column":12},"source":"db/ipfs.js","original":{"line":38,"column":12}},{"name":"load","generated":{"line":41,"column":13},"source":"db/ipfs.js","original":{"line":38,"column":13}},{"generated":{"line":41,"column":17},"source":"db/ipfs.js","original":{"line":38,"column":10}},{"generated":{"line":41,"column":19},"source":"db/ipfs.js","original":{"line":38,"column":4}},{"generated":{"line":41,"column":20},"source":"db/ipfs.js","original":{"line":7,"column":6}},{"generated":{"line":41,"column":21},"source":"db/ipfs.js","original":{"line":40,"column":4}},{"generated":{"line":42,"column":0},"source":"db/ipfs.js","original":{"line":41,"column":4}},{"generated":{"line":43,"column":0},"source":"db/ipfs.js","original":{"line":43,"column":4}},{"generated":{"line":44,"column":0},"source":"db/ipfs.js","original":{"line":44,"column":4}},{"generated":{"line":45,"column":0},"source":"db/ipfs.js","original":{"line":45,"column":4}},{"generated":{"line":46,"column":0},"source":"db/ipfs.js","original":{"line":46,"column":4}},{"generated":{"line":47,"column":0},"source":"db/ipfs.js","original":{"line":48,"column":4}},{"generated":{"line":48,"column":0},"source":"db/ipfs.js","original":{"line":49,"column":4}},{"generated":{"line":49,"column":0},"source":"db/ipfs.js","original":{"line":50,"column":4}},{"generated":{"line":50,"column":0},"source":"db/ipfs.js","original":{"line":52,"column":4}},{"generated":{"line":51,"column":0},"source":"db/ipfs.js","original":{"line":53,"column":4}},{"generated":{"line":52,"column":0},"source":"db/ipfs.js","original":{"line":54,"column":4}},{"generated":{"line":53,"column":0},"source":"db/ipfs.js","original":{"line":55,"column":4}},{"generated":{"line":54,"column":0},"source":"db/ipfs.js","original":{"line":57,"column":4}},{"generated":{"line":56,"column":0},"source":"db/ipfs.js","original":{"line":58,"column":4}},{"generated":{"line":56,"column":11},"source":"db/ipfs.js","original":{"line":58,"column":11}},{"name":"db","generated":{"line":57,"column":0},"source":"db/ipfs.js","original":{"line":58,"column":13}},{"name":"db","generated":{"line":57,"column":6},"source":"db/ipfs.js","original":{"line":58,"column":13}},{"generated":{"line":57,"column":8},"source":"db/ipfs.js","original":{"line":58,"column":11}},{"name":"ipfs","generated":{"line":58,"column":0},"source":"db/ipfs.js","original":{"line":58,"column":17}},{"name":"ipfs","generated":{"line":58,"column":6},"source":"db/ipfs.js","original":{"line":58,"column":17}},{"generated":{"line":59,"column":0},"source":"db/ipfs.js","original":{"line":58,"column":11}},{"generated":{"line":59,"column":5},"source":"db/ipfs.js","original":{"line":58,"column":4}},{"generated":{"line":59,"column":6},"source":"db/ipfs.js","original":{"line":7,"column":6}},{"generated":{"line":59,"column":7},"source":"db/ipfs.js","original":{"line":59,"column":4}},{"generated":{"line":60,"column":0},"source":"db/ipfs.js","original":{"line":60,"column":3}},{"generated":{"line":60,"column":3},"source":"db/ipfs.js","original":{"line":7,"column":2}},{"generated":{"line":60,"column":4},"source":"db/ipfs.js","original":{"line":60,"column":4}},{"name":"e","generated":{"line":60,"column":11},"source":"db/ipfs.js","original":{"line":60,"column":11}},{"generated":{"line":60,"column":12},"source":"db/ipfs.js","original":{"line":60,"column":4}},{"generated":{"line":60,"column":14},"source":"db/ipfs.js","original":{"line":60,"column":14}},{"name":"console","generated":{"line":61,"column":0},"source":"db/ipfs.js","original":{"line":61,"column":4}},{"name":"console","generated":{"line":61,"column":4},"source":"db/ipfs.js","original":{"line":61,"column":4}},{"generated":{"line":61,"column":11},"source":"db/ipfs.js","original":{"line":61,"column":11}},{"name":"error","generated":{"line":61,"column":12},"source":"db/ipfs.js","original":{"line":61,"column":12}},{"generated":{"line":61,"column":17},"source":"db/ipfs.js","original":{"line":61,"column":4}},{"name":"e","generated":{"line":61,"column":18},"source":"db/ipfs.js","original":{"line":61,"column":18}},{"generated":{"line":61,"column":19},"source":"db/ipfs.js","original":{"line":61,"column":4}},{"generated":{"line":62,"column":0},"source":"db/ipfs.js","original":{"line":62,"column":3}},{"generated":{"line":63,"column":0},"source":"db/ipfs.js","original":{"line":63,"column":1}},{"generated":{"line":63,"column":1},"source":"db/ipfs.js","original":{"line":6,"column":7}}],"sources":{"db/ipfs.js":"import Ipfs from \"ipfs\";\nimport OrbitDB from \"orbit-db\";\n\nlet ipfs, db;\n\nexport const connect = async () => {\n  try {\n    ipfs = await Ipfs.create({\n      repo: \"/orbitdb/examples/browser/new/ipfs/0.33.1\",\n      start: true,\n      preload: {\n        enabled: false,\n      },\n      EXPERIMENTAL: {\n        pubsub: true,\n      },\n      config: {\n        Addresses: {\n          Swarm: [\n            // Use IPFS dev signal server\n            // '/dns4/star-signal.cloud.ipfs.team/wss/p2p-webrtc-star',\n            // '/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star',\n            // Use IPFS dev webrtc signal server\n            \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\n            \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\n            \"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\n            // Use local signal server\n            // '/ip4/0.0.0.0/tcp/9090/wss/p2p-webrtc-star',\n          ],\n        },\n      },\n    });\n\n    const orbitdb = await OrbitDB.createInstance(ipfs);\n    const db = await orbitdb.log(\n      \"zdpuAnq4qr9a3FNH2SLsfuD7n2Ej8Xkhze5Xq8iqwuAWz1yuo/golf-dev\"\n    );\n    await db.load();\n\n    // console.log(db.address);\n    // // const hash = await db.add(\"world\");\n\n    // const networkPeers = await ipfs.swarm.peers();\n    // const databasePeers = await ipfs.pubsub.peers(db.address.toString());\n    // const elem = document.getElementById(\"peers\");\n    // elem.innerHTML = `${networkPeers.length} / ${databasePeers.length}`;\n\n    // db.events.on(\"replicated\", (address) => {\n    //   console.log(db.iterator({ limit: -1 }).collect());\n    // });\n\n    // db.events.on(\"write\", () => console.log(\"update\"));\n    // db.events.on(\"peer\", () => {\n    //   elem.innerHTML = `${networkPeers.length} / ${databasePeers.length}`;\n    // });\n\n    // Query\n    return { db, ipfs };\n    // return db.iterator({ limit: -1 }).collect();\n  } catch (e) {\n    console.error(e);\n  }\n};\n"},"lineCount":null}},"error":null,"hash":"7faa5c1075cf674531034e721f086eb9","cacheData":{"env":{}}}